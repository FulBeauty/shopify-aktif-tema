{% comment %}
  Ä°letiÅŸim SayfasÄ± - FulBeauty
  GitHub temasÄ± entegrasyonu
{% endcomment %}

<div class="page-template fade-in">
  <div class="page-header">
    <div class="container">
      <h1>{{ page.title | default: 'Ä°letiÅŸim' }}</h1>
      <p>Size nasÄ±l yardÄ±mcÄ± olabiliriz?</p>
    </div>
  </div>
  
  <div class="page-content">
    <div class="container">
      
      {% if page.content != blank %}
        <div class="content-section">
          {{ page.content }}
        </div>
      {% else %}
        <div class="content-section">
          <h2>Bizimle Ä°letiÅŸime GeÃ§in</h2>
          <p style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 3rem;">
            FulBeauty ekibi olarak, sizden gelen her geri bildirimi deÄŸerli buluyoruz. SorularÄ±nÄ±z, Ã¶nerileriniz veya herhangi bir konuda yardÄ±ma ihtiyacÄ±nÄ±z varsa, bizimle iletiÅŸime geÃ§mekten Ã§ekinmeyin.
          </p>
        </div>
      {% endif %}
      
      <!-- Ä°letiÅŸim Bilgileri -->
      <div class="feature-grid">
        <div class="feature-card">
          <h3>ğŸ“§ E-posta</h3>
          {% if settings.contact_email != blank %}
            <p><strong>Genel Sorular:</strong><br>{{ settings.contact_email }}</p>
          {% else %}
            <p><strong>Genel Sorular:</strong><br>info@fulbeauty.com</p>
          {% endif %}
          <p><strong>SipariÅŸ DesteÄŸi:</strong><br>orders@fulbeauty.com</p>
          <p><strong>Ä°ade & DeÄŸiÅŸim:</strong><br>returns@fulbeauty.com</p>
        </div>
        
        <div class="feature-card">
          <h3>ğŸ“± Telefon</h3>
          {% if settings.contact_phone != blank %}
            <p><strong>MÃ¼ÅŸteri Hizmetleri:</strong><br>{{ settings.contact_phone }}</p>
          {% else %}
            <p><strong>MÃ¼ÅŸteri Hizmetleri:</strong><br>+90 (212) 555-0123</p>
          {% endif %}
          <p><strong>Ã‡alÄ±ÅŸma Saatleri:</strong><br>Pazartesi - Cuma: 09:00 - 18:00<br>Cumartesi: 10:00 - 16:00</p>
        </div>
        
        <div class="feature-card">
          <h3>ğŸ’¬ Sosyal Medya</h3>
          {% if settings.social_instagram_link != blank %}
            <p><strong>Instagram:</strong> <a href="{{ settings.social_instagram_link }}" target="_blank">@fulbeauty_official</a></p>
          {% else %}
            <p><strong>Instagram:</strong> @fulbeauty_official</p>
          {% endif %}
          <p><strong>TikTok:</strong> @fulbeauty</p>
          <p><strong>Facebook:</strong> FulBeauty TÃ¼rkiye</p>
          <p><em>DM'lerinizi 24 saat iÃ§inde yanÄ±tlÄ±yoruz!</em></p>
        </div>
      </div>
      
      <!-- Ä°letiÅŸim Formu -->
      <div class="content-section">
        <h2>Ä°letiÅŸim Formu</h2>
        
        {% form 'contact' %}
          {% if form.posted_successfully? %}
            <div class="form-success" style="background: var(--success-color); color: white; padding: 1rem; border-radius: var(--radius-md); margin-bottom: 2rem;">
              <strong>âœ… TeÅŸekkÃ¼rler!</strong> MesajÄ±nÄ±z baÅŸarÄ±yla gÃ¶nderildi. En kÄ±sa sÃ¼rede size dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.
            </div>
          {% endif %}
          
          {% if form.errors %}
            <div class="form-errors" style="background: var(--error-color); color: white; padding: 1rem; border-radius: var(--radius-md); margin-bottom: 2rem;">
              <strong>âŒ Hata:</strong>
              <ul style="margin: 0.5rem 0 0 1rem;">
                {% for field in form.errors %}
                  <li>{{ field[1] }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
          
          <div class="contact-form">
            <div class="form-group">
              <label for="ContactFormName">AdÄ±nÄ±z SoyadÄ±nÄ±z *</label>
              <input type="text" 
                     id="ContactFormName" 
                     name="contact[name]" 
                     value="{% if form.name %}{{ form.name }}{% endif %}"
                     required>
            </div>
            
            <div class="form-group">
              <label for="ContactFormEmail">E-posta Adresiniz *</label>
              <input type="email" 
                     id="ContactFormEmail" 
                     name="contact[email]" 
                     value="{% if form.email %}{{ form.email }}{% endif %}"
                     required>
            </div>
            
            <div class="form-group">
              <label for="ContactFormPhone">Telefon NumaranÄ±z</label>
              <input type="tel" 
                     id="ContactFormPhone" 
                     name="contact[phone]"
                     value="{% if form.phone %}{{ form.phone }}{% endif %}">
            </div>
            
            <div class="form-group">
              <label for="ContactFormSubject">Konu *</label>
              <select id="ContactFormSubject" name="contact[subject]" required>
                <option value="">LÃ¼tfen seÃ§iniz</option>
                <option value="product_question" {% if form.subject == 'product_question' %}selected{% endif %}>ÃœrÃ¼n HakkÄ±nda Soru</option>
                <option value="order_status" {% if form.subject == 'order_status' %}selected{% endif %}>SipariÅŸ Durumu</option>
                <option value="return_exchange" {% if form.subject == 'return_exchange' %}selected{% endif %}>Ä°ade & DeÄŸiÅŸim</option>
                <option value="technical_support" {% if form.subject == 'technical_support' %}selected{% endif %}>Teknik Destek</option>
                <option value="partnership" {% if form.subject == 'partnership' %}selected{% endif %}>Ä°ÅŸ BirliÄŸi</option>
                <option value="other" {% if form.subject == 'other' %}selected{% endif %}>DiÄŸer</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="ContactFormMessage">MesajÄ±nÄ±z *</label>
              <textarea id="ContactFormMessage" 
                        name="contact[body]" 
                        rows="6" 
                        required 
                        placeholder="MesajÄ±nÄ±zÄ± buraya yazÄ±n...">{% if form.body %}{{ form.body }}{% endif %}</textarea>
            </div>
            
            <!-- Honeypot for spam protection -->
            <div style="display: none;">
              <label for="ContactFormHoney">Bunu boÅŸ bÄ±rakÄ±n</label>
              <input type="text" id="ContactFormHoney" name="contact[honey]" value="">
            </div>
            
            <button type="submit" class="cta-button">
              MesajÄ± GÃ¶nder
            </button>
          </div>
        {% endform %}
      </div>
      
      <!-- HÄ±zlÄ± Ä°letiÅŸim -->
      <div class="highlight-box">
        <p><strong>HÄ±zlÄ± yanÄ±t mÄ± istiyorsunuz?</strong> En sÄ±k sorulan sorularÄ±n yanÄ±tlarÄ±nÄ± <a href="{{ pages['faq'].url | default: '/pages/faq' }}" style="color: var(--primary-color); font-weight: 600;">FAQ sayfamÄ±zda</a> bulabilirsiniz!</p>
        
        {% if settings.whatsapp_number != blank %}
          <p style="margin-top: 1rem;">
            <strong>AnÄ±nda destek iÃ§in:</strong> 
            <a href="https://wa.me/{{ settings.whatsapp_number }}?text=Merhaba, FulBeauty hakkÄ±nda bilgi almak istiyorum." 
               target="_blank"
               style="display: inline-flex; align-items: center; gap: 0.5rem; background: #25D366; color: white; padding: 0.5rem 1rem; border-radius: 25px; text-decoration: none; font-weight: 600; margin-left: 0.5rem;">
              ğŸ’¬ WhatsApp'tan YazÄ±n
            </a>
          </p>
        {% endif %}
      </div>
      
      <!-- Harita veya Adres (isteÄŸe baÄŸlÄ±) -->
      {% if settings.store_address != blank %}
      <div class="content-section">
        <h2>MaÄŸaza Adresimiz</h2>
        <div class="feature-card" style="max-width: 500px; margin: 0 auto;">
          <h3>ğŸ“ Ziyaret Edin</h3>
          <p>{{ settings.store_address }}</p>
          {% if settings.store_hours != blank %}
            <p><strong>Ã‡alÄ±ÅŸma Saatleri:</strong><br>{{ settings.store_hours }}</p>
          {% endif %}
        </div>
      </div>
      {% endif %}
      
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Form validasyonu
  const form = document.querySelector('form[action*="contact"]');
  if (form) {
    form.addEventListener('submit', function(e) {
      const name = form.querySelector('#ContactFormName').value.trim();
      const email = form.querySelector('#ContactFormEmail').value.trim();
      const subject = form.querySelector('#ContactFormSubject').value;
      const message = form.querySelector('#ContactFormMessage').value.trim();
      const honey = form.querySelector('#ContactFormHoney').value;
      
      // Spam korumasÄ±
      if (honey !== '') {
        e.preventDefault();
        return false;
      }
      
      // Temel validasyon
      if (!name || !email || !subject || !message) {
        alert('LÃ¼tfen tÃ¼m zorunlu alanlarÄ± doldurun.');
        e.preventDefault();
        return false;
      }
      
      // E-posta formatÄ± kontrolÃ¼
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('LÃ¼tfen geÃ§erli bir e-posta adresi girin.');
        e.preventDefault();
        return false;
      }
    });
    
    // Karakter sayacÄ± (mesaj alanÄ± iÃ§in)
    const messageField = form.querySelector('#ContactFormMessage');
    if (messageField) {
      const maxLength = 1000;
      const counter = document.createElement('div');
      counter.style.cssText = 'font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem; text-align: right;';
      messageField.parentNode.appendChild(counter);
      
      function updateCounter() {
        const remaining = maxLength - messageField.value.length;
        counter.textContent = `${messageField.value.length}/${maxLength} karakter`;
        counter.style.color = remaining < 50 ? 'var(--warning-color)' : 'var(--text-secondary)';
      }
      
      messageField.addEventListener('input', updateCounter);
      messageField.maxLength = maxLength;
      updateCounter();
    }
  }
});
</script>